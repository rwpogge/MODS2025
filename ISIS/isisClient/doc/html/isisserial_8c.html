<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ISIS Client API: isisserial.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ISIS Client API
   &#160;<span id="projectnumber">Version 2.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">isisserial.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ISIS client serial port handling utilties.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="isisclient_8h_source.html">isisclient.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae29c104ba098cda3be8c8c64e4ed15fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc">OpenSerialPort</a> (char *ttydev)</td></tr>
<tr class="memdesc:ae29c104ba098cda3be8c8c64e4ed15fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a serial port.  <a href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc">More...</a><br /></td></tr>
<tr class="separator:ae29c104ba098cda3be8c8c64e4ed15fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50511d9ef6e87e279ec196f2697d976f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="isisserial_8c.html#a50511d9ef6e87e279ec196f2697d976f">SetSerialPort</a> (int ttyFD, int speed, int databits, int stopbits, int parity)</td></tr>
<tr class="memdesc:a50511d9ef6e87e279ec196f2697d976f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the serial port attributes.  <a href="isisserial_8c.html#a50511d9ef6e87e279ec196f2697d976f">More...</a><br /></td></tr>
<tr class="separator:a50511d9ef6e87e279ec196f2697d976f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f0d7e63cdc1c197cfc2d112483778bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="isisserial_8c.html#a1f0d7e63cdc1c197cfc2d112483778bb">CloseSerialPort</a> (int ttyFD)</td></tr>
<tr class="memdesc:a1f0d7e63cdc1c197cfc2d112483778bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an open serial port.  <a href="isisserial_8c.html#a1f0d7e63cdc1c197cfc2d112483778bb">More...</a><br /></td></tr>
<tr class="separator:a1f0d7e63cdc1c197cfc2d112483778bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac60ceef5405797b781a14c0cafb9be94"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="isisserial_8c.html#ac60ceef5405797b781a14c0cafb9be94">WriteSerialPort</a> (int ttyFD, char *msgstr)</td></tr>
<tr class="memdesc:ac60ceef5405797b781a14c0cafb9be94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a message string to a serial port.  <a href="isisserial_8c.html#ac60ceef5405797b781a14c0cafb9be94">More...</a><br /></td></tr>
<tr class="separator:ac60ceef5405797b781a14c0cafb9be94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a781e8e950736ff886d2350f9c6cc5b17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="isisserial_8c.html#a781e8e950736ff886d2350f9c6cc5b17">ReadSerialPort</a> (int ttyFD, char *msgstr)</td></tr>
<tr class="memdesc:a781e8e950736ff886d2350f9c6cc5b17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from a serial port.  <a href="isisserial_8c.html#a781e8e950736ff886d2350f9c6cc5b17">More...</a><br /></td></tr>
<tr class="separator:a781e8e950736ff886d2350f9c6cc5b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8718ee30f7ca6d7db579c980dc78ba3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="isisserial_8c.html#af8718ee30f7ca6d7db579c980dc78ba3">FlushSerialPort</a> (int ttyFD, int ntimes)</td></tr>
<tr class="memdesc:af8718ee30f7ca6d7db579c980dc78ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from a serial port.  <a href="isisserial_8c.html#af8718ee30f7ca6d7db579c980dc78ba3">More...</a><br /></td></tr>
<tr class="separator:af8718ee30f7ca6d7db579c980dc78ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ISIS client serial port handling utilties. </p>
<p>This is a set of simple functions for using serial (tty) ports in an ISIS client application. They encapsulate a number of useful basic functions for opening, closing, setting attributes, reading, writing, and flushing junk from serial ports, relieving writers of ISIS client applications from the pain of getting all the arcane fcntl and termios calls right.</p>
<dl class="section author"><dt>Author</dt><dd>R. Pogge, OSU Astronomy Dept (<a href="#" onclick="location.href='mai'+'lto:'+'pog'+'ge'+'@as'+'tr'+'ono'+'my'+'.oh'+'io'+'-st'+'at'+'e.e'+'du'; return false;">pogge<span style="display: none;">.nosp@m.</span>@ast<span style="display: none;">.nosp@m.</span>ronom<span style="display: none;">.nosp@m.</span>y.oh<span style="display: none;">.nosp@m.</span>io-st<span style="display: none;">.nosp@m.</span>ate.<span style="display: none;">.nosp@m.</span>edu</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2003 September 15 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae29c104ba098cda3be8c8c64e4ed15fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29c104ba098cda3be8c8c64e4ed15fc">&#9670;&nbsp;</a></span>OpenSerialPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenSerialPort </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ttydev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a serial port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ttydev</td><td>Name of the port (e.g., /dev/ttya) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>File descriptor of the open serial port or -1 if failed</dd></dl>
<p>Opens the named serial port for unblocking read/write (the only mode we support), and returns the file descriptor of the open port. All error messages are reported internally. This function only opens the port; port attributes (speed, parity, etc.) need to be set subsequently using the <a class="el" href="isisserial_8c.html#a50511d9ef6e87e279ec196f2697d976f" title="Set the serial port attributes.">SetSerialPort()</a> call </p>

</div>
</div>
<a id="a50511d9ef6e87e279ec196f2697d976f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50511d9ef6e87e279ec196f2697d976f">&#9670;&nbsp;</a></span>SetSerialPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SetSerialPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttyFD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>databits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stopbits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>parity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the serial port attributes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ttyFD</td><td>File descriptor of the open port (see <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>) </td></tr>
    <tr><td class="paramname">speed</td><td>Port speed in baud, one of (1200,2400,4800,9600,19200,38400) </td></tr>
    <tr><td class="paramname">databits</td><td>Number of data bits (5, 6, 7, or 8) </td></tr>
    <tr><td class="paramname">stopbits</td><td>Number of stop bits (1 or 2) </td></tr>
    <tr><td class="paramname">parity</td><td>Port parity, 0 = noparity, 1 = enable parity <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, -1 if an error.</dd></dl>
<p>Sets the attributes of the open serial port: speed, data bits (character size mask), stop bits (1 or 2), and partiy (no parity, or parity generation on output/checking on input). The normal mode for most tty ports we use in the data-taking system are set to </p><pre class="fragment">9600 baud, 8 data bits, 1 stop bit, no parity </pre><p> corresponding to speed=9600, databits=8, stopbits=2, parity=0.</p>
<p>The port must have already been opened using <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a> </dd></dl>

</div>
</div>
<a id="a1f0d7e63cdc1c197cfc2d112483778bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f0d7e63cdc1c197cfc2d112483778bb">&#9670;&nbsp;</a></span>CloseSerialPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CloseSerialPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttyFD</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close an open serial port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ttyFD</td><td>file descriptor of an open serial port (see <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>)</td></tr>
  </table>
  </dd>
</dl>
<p>Closes an open serial port. Used as a simple wrapper for the close() function to provide a logical functional opposite to <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>. </p>

</div>
</div>
<a id="ac60ceef5405797b781a14c0cafb9be94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac60ceef5405797b781a14c0cafb9be94">&#9670;&nbsp;</a></span>WriteSerialPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WriteSerialPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttyFD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msgstr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a message string to a serial port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ttyFD</td><td>file descriptor of an open serial port (see <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>) </td></tr>
    <tr><td class="paramname">msgstr</td><td>message string to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes written if successful, 0 or -1 if unsuccessful.</dd></dl>
<p>Writes the message string provided to the serial port given by ttyFD. This port must have been previously opened and setup using the <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a> and SetSeriaPort() functions.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="isisserial_8c.html#a781e8e950736ff886d2350f9c6cc5b17" title="Read data from a serial port.">ReadSerialPort()</a> </dd></dl>

</div>
</div>
<a id="a781e8e950736ff886d2350f9c6cc5b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a781e8e950736ff886d2350f9c6cc5b17">&#9670;&nbsp;</a></span>ReadSerialPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ReadSerialPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttyFD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msgstr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from a serial port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ttyFD</td><td>file descriptor of an open serial port (see <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>) </td></tr>
    <tr><td class="paramname">msgstr</td><td>message string to carry the input string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes read if successful, 0 or -1 if unsuccessful.</dd></dl>
<p>Reads characters from the serial port ttyFD and loads them into msgstr. This port must have been previously opened and setup using the <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a> and SetSeriaPort() functions. This function is most often used in the context of a select() loop to watch for activity on one or more open serial ports, though it may be used generally as required.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="isisserial_8c.html#ac60ceef5405797b781a14c0cafb9be94" title="Write a message string to a serial port.">WriteSerialPort()</a> </dd></dl>

</div>
</div>
<a id="af8718ee30f7ca6d7db579c980dc78ba3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8718ee30f7ca6d7db579c980dc78ba3">&#9670;&nbsp;</a></span>FlushSerialPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlushSerialPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttyFD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ntimes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from a serial port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ttyFD</td><td>file descriptor of an open serial port (see <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a>) </td></tr>
    <tr><td class="paramname">ntimes</td><td>number of times to read the port for flushing</td></tr>
  </table>
  </dd>
</dl>
<p>Reads the serial port ntimes to attempt to flush any extraneous port junk. This port must have been previously opened and setup using the <a class="el" href="isisserial_8c.html#ae29c104ba098cda3be8c8c64e4ed15fc" title="Open a serial port.">OpenSerialPort()</a> and SetSeriaPort() functions. Assumes that the buffer size is at least the default BUFSIZ defined in stdio.h Whether or not this is a good idea remains to be seen. </p>

<p class="reference">References <a class="el" href="isisclient_8h.html#a57dbf425a02243392c9cae9beeb77da8">MilliSleep()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
