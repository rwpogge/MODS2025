<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mmcService - Interactive MODS Mechanism Control System: loadconfig.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mmcService - Interactive MODS Mechanism Control System
   &#160;<span id="projectnumber">Version 0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">loadconfig.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Load/Parse ISIS client's runtime configuration file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;isisclient.h&quot;</code><br />
<code>#include &quot;mmc_client.h&quot;</code><br />
<code>#include &quot;instrutils.h&quot;</code><br />
<code>#include &quot;isl_types.h&quot;</code><br />
<code>#include &quot;params.h&quot;</code><br />
<code>#include &quot;islcommon.h&quot;</code><br />
<code>#include &quot;isl_shmaddr.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a44abb36ef3ad05298697651a73be4e0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loadconfig_8c.html#a44abb36ef3ad05298697651a73be4e0e">MAXCFGLINE</a>&#160;&#160;&#160;80</td></tr>
<tr class="memdesc:a44abb36ef3ad05298697651a73be4e0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum mumber of characters/line in the runtime config file.  <a href="loadconfig_8c.html#a44abb36ef3ad05298697651a73be4e0e">More...</a><br /></td></tr>
<tr class="separator:a44abb36ef3ad05298697651a73be4e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6e4c6ceb4d35f458738315ff4e3efb32"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loadconfig_8c.html#a6e4c6ceb4d35f458738315ff4e3efb32">LoadConfig</a> (char *cfgfile)</td></tr>
<tr class="memdesc:a6e4c6ceb4d35f458738315ff4e3efb32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load/Parse ISIS client's runtime configuration file.  <a href="loadconfig_8c.html#a6e4c6ceb4d35f458738315ff4e3efb32">More...</a><br /></td></tr>
<tr class="separator:a6e4c6ceb4d35f458738315ff4e3efb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Load/Parse ISIS client's runtime configuration file. </p>
<p>ISIS-style runtime configuration files (e.g., named myclient.ini, .myclientrc, whatever) contain simple Keyword-Value pairs that are parsed into global-scope variables for the client and its various subroutines to use.</p>
<p>The # is used as a comment character, making a comment line when it appears as the first character in a line by itself. Inline comments are not supported by this simple parser, but are generally ignored since it assumes (again for simplicity) that value arguments are numbers or strings without spaces. Fancier parsers can be implemented as needed. Blank lines are ignored by the parser. We adopt the convention that keywords and values are case insensitive, to remove any ambiguity.</p>
<p>This template provides a good example of common client initialiation file parameters and syntax. The idea is to make the runtime config files for all ISIS clients look pretty much the same in terms of having a common syntax as appearance. The utility function GetArg() used here is from isisutils.c, with the prototype defined in the isisclient.h header.</p>
<p>A typical runtime config file has the following structure: </p><div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"># myclient runtime configuration file</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"># Modified 2003 June 21 by Barry Boron (boron.1@osu.edu)</span></div>
<div class="line"><span class="preprocessor"># for the fauxMODS spectrograph system echoclient.</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line">ID   echo</div>
<div class="line">Port 7890</div>
<div class="line">LogFile    /data/Logs/myclient</div>
<div class="line">Verbose</div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line">ServerID   isis1</div>
<div class="line">ServerHost mods1.lbto.org</div>
<div class="line">ServerPort 6789</div>
</div><!-- fragment --><p>Here we are telling myclient that it is a client of an ISIS server named "isis1" running on host mods1.lbto.org and listening to network socket port 6789. We are to be an ISIS client node named "echo" listing to network socket port 7890 on the localhost. All runtime logging will be recorded to a file named /data/Logs/myclient.log, and both logging and screen output will be Verbose for debugging purposes.</p>
<p>As this example shows, the goal is that runtime configuration files are easily read and created by humans. A common syntax makes maintenance of many clients easier.</p>
<p>This version is custom for the MODS IE server application.</p>
<dl class="section author"><dt>Author</dt><dd>Ray Gonzalez (<a href="#" onclick="location.href='mai'+'lto:'+'rdg'+'@a'+'str'+'on'+'omy'+'.o'+'hio'+'-s'+'tat'+'e.'+'edu'; return false;">rdg@a<span style="display: none;">.nosp@m.</span>stro<span style="display: none;">.nosp@m.</span>nomy.<span style="display: none;">.nosp@m.</span>ohio<span style="display: none;">.nosp@m.</span>-stat<span style="display: none;">.nosp@m.</span>e.ed<span style="display: none;">.nosp@m.</span>u</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2005 May 05 (original version based on the ISIS server ParseIniFile())</dd></dl>
<dl class="section user"><dt>Mods Modification History:</dt><dd><pre>  
2005 May 05 - modified for the mods IE app wiht the mechanisms.ini file [rdg/osu]
2025 Jun 25 - MODS2025 controller upgrade port, see notes [rwp/osu]
</pre> <br  />
 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a44abb36ef3ad05298697651a73be4e0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44abb36ef3ad05298697651a73be4e0e">&#9670;&nbsp;</a></span>MAXCFGLINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXCFGLINE&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum mumber of characters/line in the runtime config file. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6e4c6ceb4d35f458738315ff4e3efb32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e4c6ceb4d35f458738315ff4e3efb32">&#9670;&nbsp;</a></span>LoadConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LoadConfig </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cfgfile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load/Parse ISIS client's runtime configuration file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfgfile</td><td>Path/name of the client runtime configuration file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, &lt;0 if failure. All error message are printed to the client's console.</dd></dl>
<p>The precise actions of <a class="el" href="loadconfig_8c.html#a6e4c6ceb4d35f458738315ff4e3efb32" title="Load/Parse ISIS client&#39;s runtime configuration file.">LoadConfig()</a> are tailored to the client application.</p>
<p>Changes: 2025 June - added QC_PORT keyword to replace QCIP_PORT for WAGO-based quadcell readout [rwp/osu] </p>

<p class="reference">References <a class="el" href="commands_8c.html#a37d43f856c57e2f3a4caba3a7a64d060">argbuf</a>, <a class="el" href="mmcService_8c.html#a19b3c234b75f9c2c45f5bd24d54ffa8c">client</a>, <a class="el" href="commands_8c.html#a4cd23170eb9929ab246bfb3c1e486352">inbuf</a>, and <a class="el" href="loadconfig_8c.html#a44abb36ef3ad05298697651a73be4e0e">MAXCFGLINE</a>.</p>

<p class="reference">Referenced by <a class="el" href="mmcService_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>, and <a class="el" href="mmcService_8c.html#a3dd856836c8915e9bf1309ee031502b4">thread_init_func()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
