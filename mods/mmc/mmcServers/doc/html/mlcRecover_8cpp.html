<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mmcService - Interactive MODS Mechanism Control System: mlcRecover.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mmcService - Interactive MODS Mechanism Control System
   &#160;<span id="projectnumber">Version 0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mlcRecover.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>mlcRecover - Recovers all lost data due to a reboot.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;sys/sendfile.h&gt;</code><br />
<code>#include &quot;instrutils.h&quot;</code><br />
<code>#include &quot;isl_funcs.h&quot;</code><br />
<code>#include &quot;isl_types.h&quot;</code><br />
<code>#include &quot;params.h&quot;</code><br />
<code>#include &quot;islcommon.h&quot;</code><br />
<code>#include &quot;isl_shmaddr.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a59f53fff015c2a17868a192d4a6fde63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mlcRecover_8cpp.html#a59f53fff015c2a17868a192d4a6fde63">MAX_TABLINES</a>&#160;&#160;&#160;80</td></tr>
<tr class="memdesc:a59f53fff015c2a17868a192d4a6fde63"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of lines to read from a mechanism table  <a href="mlcRecover_8cpp.html#a59f53fff015c2a17868a192d4a6fde63">More...</a><br /></td></tr>
<tr class="separator:a59f53fff015c2a17868a192d4a6fde63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a19644e486affe41a3183db2e0c825add"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mlcRecover_8cpp.html#a19644e486affe41a3183db2e0c825add">StrUpper</a> (char *str)</td></tr>
<tr class="memdesc:a19644e486affe41a3183db2e0c825add"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert all characters in a string to uppercase.  <a href="mlcRecover_8cpp.html#a19644e486affe41a3183db2e0c825add">More...</a><br /></td></tr>
<tr class="separator:a19644e486affe41a3183db2e0c825add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b084bc0ea03de889eff2b593c43001"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mlcRecover_8cpp.html#a00b084bc0ea03de889eff2b593c43001">getDateTime</a> (void)</td></tr>
<tr class="memdesc:a00b084bc0ea03de889eff2b593c43001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the UTC date and time to microsecond precision as a system timestamp.  <a href="mlcRecover_8cpp.html#a00b084bc0ea03de889eff2b593c43001">More...</a><br /></td></tr>
<tr class="separator:a00b084bc0ea03de889eff2b593c43001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mlcRecover_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>mlcRecover - Recovers all lost data due to a reboot. </p>
<dl class="section author"><dt>Author</dt><dd>Staff, OSU Astronomy Dept. (<a href="#" onclick="location.href='mai'+'lto:'+'rgo'+'nz'+'ale'+'@a'+'str'+'on'+'omy'+'.o'+'hio'+'-s'+'tat'+'e.'+'edu'; return false;">rgonz<span style="display: none;">.nosp@m.</span>ale@<span style="display: none;">.nosp@m.</span>astro<span style="display: none;">.nosp@m.</span>nomy<span style="display: none;">.nosp@m.</span>.ohio<span style="display: none;">.nosp@m.</span>-sta<span style="display: none;">.nosp@m.</span>te.ed<span style="display: none;">.nosp@m.</span>u</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2009 Mar 12 (rdg)</dd></dl>
<dl class="section user"><dt>Usage: Unix style.</dt><dd>mlcRecover();</dd></dl>
<p>Shared Memory recover function, recovers the MicroLynx Controller state, agwFilter names, camera filter names, and anything else we can think of Information is place computers MODS shared memory segments.</p>
<p>NOTE: These files are kept in /home2/mods/data shrmem.tab, agwfilters.tab, camfilters.tab misc.tab</p>
<p>2025 June 20 - AlmaLinux 9 port [rwp/osu] </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a59f53fff015c2a17868a192d4a6fde63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f53fff015c2a17868a192d4a6fde63">&#9670;&nbsp;</a></span>MAX_TABLINES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_TABLINES&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>maximum number of lines to read from a mechanism table </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a19644e486affe41a3183db2e0c825add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19644e486affe41a3183db2e0c825add">&#9670;&nbsp;</a></span>StrUpper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StrUpper </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert all characters in a string to uppercase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>String to be converted to uppercase. Changed by this function.</td></tr>
  </table>
  </dd>
</dl>
<p>Helper utility to convert all characters in a string to uppercase. All commands are required to be in uppercase. </p>

<p class="reference">Referenced by <a class="el" href="commands_8c.html#abb666efb00d42bdf6b8d1246c21137bc">cmd_abort()</a>, <a class="el" href="commands_8c.html#a6b804b1a84d9e6f235251f3dfac52dbc">cmd_agw()</a>, <a class="el" href="commands_8c.html#ad423d35ceb1be3cc8526c3d23fa383fa">cmd_agwfilt()</a>, <a class="el" href="commands_8c.html#a8d3f2a91948d3e3b6950cbf82fceab31">cmd_agwfoc()</a>, <a class="el" href="commands_8c.html#a737078532579ff008c9f4cb74cc3b1eb">cmd_agwx()</a>, <a class="el" href="commands_8c.html#abc0176a1f785f5db94bc855a032d9989">cmd_agwy()</a>, <a class="el" href="commands_8c.html#adecdb51faeee91e13090221b939fbc20">cmd_calib()</a>, <a class="el" href="commands_8c.html#ac2c42d5e71e15ce44d534450360898eb">cmd_camfoc()</a>, <a class="el" href="commands_8c.html#a2730d9b180c5cb860aa739f4780c101b">cmd_close()</a>, <a class="el" href="commands_8c.html#a3461e0ac32d0e367f14d78a082546bdc">cmd_colfoc()</a>, <a class="el" href="commands_8c.html#a036078196d69d8a2f49b963bd8a3b1ce">cmd_colttf()</a>, <a class="el" href="commands_8c.html#a0f0a9d44278c79fdc7fe2f26925c8709">cmd_dichroic()</a>, <a class="el" href="commands_8c.html#a1429620bfd12180699a5cbb00ec49afb">cmd_filter()</a>, <a class="el" href="commands_8c.html#a0958740bd5ca466caae249740a5a1dec">cmd_gpfocus()</a>, <a class="el" href="commands_8c.html#a0f1262affd78461639bad05b79eed80a">cmd_gpoffset()</a>, <a class="el" href="commands_8c.html#a3f8d433c91cc4468c484b61406f48714">cmd_gprobe()</a>, <a class="el" href="commands_8c.html#acb873ab4684012dbce76daf7af1a535e">cmd_grating()</a>, <a class="el" href="commands_8c.html#a8a23c0983b519ebc4385ceca2a4a610c">cmd_grtilt()</a>, <a class="el" href="commands_8c.html#aa3c686fdee0f5b7040da5c21857158f9">cmd_hatch()</a>, <a class="el" href="commands_8c.html#a357eae20439e1160684cd0dc55568fbe">cmd_help()</a>, <a class="el" href="commands_8c.html#aa6813d91991de1705bd82198e9dafb4c">cmd_ieb()</a>, <a class="el" href="commands_8c.html#a9ce806866ee15181b8d253dfbe07da4f">cmd_imcs()</a>, <a class="el" href="commands_8c.html#a55e13dc821a12cf5924f690f0e3402dc">cmd_info()</a>, <a class="el" href="commands_8c.html#a8a1353ff8f283a3510a469e464e0af62">cmd_irlaser()</a>, <a class="el" href="commands_8c.html#ae6edbc2b1b131fec8fec1668f43a6651">cmd_istatus()</a>, <a class="el" href="commands_8c.html#a8f3cf6bbedae2840e50310a954398343">cmd_lamp()</a>, <a class="el" href="commands_8c.html#a3c46b1e7f14596e346a28e6ce5205cb6">cmd_minsert()</a>, <a class="el" href="commands_8c.html#abe998fdfb3101fab96726015366c41ab">cmd_misc()</a>, <a class="el" href="commands_8c.html#a1a0ee82d1d340b991fa58ed1d811b78f">cmd_moveabs()</a>, <a class="el" href="commands_8c.html#ae0ad91b4a5ab543df8990f28439441f6">cmd_moverel()</a>, <a class="el" href="commands_8c.html#afeb0cf4fdc04a3577976c67f37427d2f">cmd_mselect()</a>, <a class="el" href="commands_8c.html#a4364d096e6327dea5d0777c43a93bd45">cmd_mstatus()</a>, <a class="el" href="commands_8c.html#aca451e1e42ff698bf35d038ecd950867">cmd_open()</a>, <a class="el" href="commands_8c.html#a8e1062e8f6a1d59c5aa04b7de85df462">cmd_ports()</a>, <a class="el" href="commands_8c.html#a50267215a69322ae3c82d39a74c06713">cmd_power65()</a>, <a class="el" href="commands_8c.html#a41d0925f4aac32db0562b5702e5bf29e">cmd_pstatus()</a>, <a class="el" href="commands_8c.html#a06bb5452eb7ec0ce57eb1d6b8c2e0f76">cmd_setport()</a>, <a class="el" href="commands_8c.html#a6c65b8f1eeab504d2e3ef2d0b6c3c899">cmd_shutter()</a>, <a class="el" href="commands_8c.html#abb5debb03e85ee2dbc7a536837635bf3">cmd_slitmask()</a>, <a class="el" href="commands_8c.html#a7b7e22a2df8f577f559fdb6df89fb15a">cmd_version()</a>, <a class="el" href="commands_8c.html#ad2ff87c46228f6eda361b7cd68b0bce7">cmd_vislaser()</a>, <a class="el" href="mlcRecover_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>, and <a class="el" href="commands_8c.html#a42768410389829f6606e229cfb853dc5">SocketCommand()</a>.</p>

</div>
</div>
<a id="a00b084bc0ea03de889eff2b593c43001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b084bc0ea03de889eff2b593c43001">&#9670;&nbsp;</a></span>getDateTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* getDateTime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the UTC date and time to microsecond precision as a system timestamp. </p>
<p>Return the UTC date/time as an ISO 8601 coded string.</p>
<p>Reads the system's UTC time clock and returns a pointer to a string with the fine-grained UTC time in <code>hh:mm:ss.ssssss</code> format.</p>
<p>Based on gf_time() from Stevens, W.R., 1998, Unix Network Programming, Vol 2, Prentice Hall, Figure 15.6, but I make a string with an ISO8601 compliant format.</p>
<p>Of course, while it may return microsecond precision, microsecond accuracy is quite another thing... </p>

<p class="reference">Referenced by <a class="el" href="mlcRecover_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="mlcRecover_8cpp.html#a00b084bc0ea03de889eff2b593c43001">getDateTime()</a>, <a class="el" href="mlcRecover_8cpp.html#a59f53fff015c2a17868a192d4a6fde63">MAX_TABLINES</a>, and <a class="el" href="mlcRecover_8cpp.html#a19644e486affe41a3183db2e0c825add">StrUpper()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
