MSEL=10  
MUNIT=2000  
MAC=50  
MRC=30  
MHC=0  
HCDT=500  
IOS 21=13 , 0 , 0  
IOS 22=14 , 0 , 0  
IOS 26=0 , 1 , 0  
IOS 30=0 , 0 , 0  
* Motion config.
ACCL=50  
DECL=ACCL  
LDECL=500
* Variables  
VAR INCR=1.800  
VAR MASKNUM 
VAR ABSPOS 
VAR TARGNUM 
VAR TARGMOV 
VAR POSERR 
VAR CYCLE=0  
* Initial Position seek
IO 26=1  
SLEW   3  
LBL SENSE1
BR  FOUND, IO 36  =  1  
BR  SENSE1 
LBL FOUND
SSTP 0  
PRINT "Found Position Valid TRUE" 
CALL CENTER 
*
IO 26=0  
MASKNUM=IO 30 - 32  
PRINT "Mask#= "MASKNUM 
ABSPOS=MASKNUM*INCR 
POS=ABSPOS 
PRINT "Absolute Position = "POS  
DELAY 1000  
LBL INDEX
TARGNUM=MASKNUM+1  
CALL RESET TARGNUM>24  
TARGMOV=TARGNUM* INCR 
PRINT "Target Position = "TARGMOV 
IO 26=1  
VM=5  
MOVA TARGMOV 
HOLD 2  
CALL CENTER 
IO 26=0  
DELAY 1000  
POSERR=TARGMOV -  CEN 
PRINT "Targeting Error = "POSERR 
MASKNUM=IO 30-32  
PRINT "Target Found, Mask # = "MASKNUM 
BR  INDEX 
LBL REDO
TARGNUM=0  
CYCLE=CYCLE +  1  
PRINT "CYCLE COUNT= "CYCLE 
RET       
LBL CENTER
VAR POSEDGE 
VAR NEGEDGE 
VAR SUM 
VAR CEN 
SLEW 0.500  
LBL PL
BR PLUS, IO 36  =  0  
BR PL 
LBL PLUS
SSTP 0  
POSEDGE= POS  
PRINT "POSEDGE ="POSEDGE 
SLEW -0.500  
LBL NG
BR NG1, IO 36  =  1  
BR NG 
LBL NG1
BR NEG, IO 36  =  0  
BR NG1 
LBL NEG
SSTP 0  
NEGEDGE=POS  
PRINT "NEGEDGE ="NEGEDGE 
SUM=POSEDGE+NEGEDGE 
CEN=SUM/2  
VM=0.500  
MOVA CEN 
HOLD 2  
PRINT "Centering Routine Reached Position = "POS  
RET
